<?xml version="1.0" encoding="utf-8"?>

<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:pages="clr-namespace:Stickr.ViewModels.Pages"
    xmlns:models="clr-namespace:Stickr.Models"
    x:Class="Stickr.Views.Pages.AlbumDetailsView"
    x:DataType="pages:AlbumDetailsViewModel"
    Title="{Binding Title}">

    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="12">

            <Label
                Text="{Binding Title}"
                FontSize="24"
                FontAttributes="Bold" />

            <Label
                Text="{Binding Description}"
                FontSize="14"
                TextColor="Gray" />
            
            <CollectionView ItemsSource="{Binding Pages}">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="models:Page">
                        <Frame Padding="12" Margin="6">
                            <VerticalStackLayout>
                                <Label
                                    Text="{Binding Number, StringFormat='Page {0}'}"
                                    FontAttributes="Bold" />

                                <Label
                                    Text="{Binding FirstSticker, StringFormat='Stickers {0}'}" />

                                <Label
                                    Text="{Binding LastSticker, StringFormat='to {0}'}" />
                            </VerticalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
            
            <Button
                Text="Add test stickers (3, 5, 7)"
                Command="{Binding AddTestStickersCommand}" />
            
            <Button
                Text="Delete sticker #5"
                Command="{Binding DeleteStickerFiveCommand}" />
            
            <Button
                Text="Scan stickers"
                Command="{Binding ScanStickersCommand}" />

            <CollectionView
                ItemsSource="{Binding Stickers}"
                Margin="0,16,0,0">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="models:Sticker">
                        <HorizontalStackLayout Spacing="12">
                            <Label
                                Text="{Binding Number}"
                                FontSize="18"
                                FontAttributes="Bold" />
                            <Label
                                Text="{Binding AddedAt}"
                                FontSize="12"
                                TextColor="Gray" />
                        </HorizontalStackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>